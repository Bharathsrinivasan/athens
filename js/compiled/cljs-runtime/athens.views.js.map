{"version":3,"sources":["athens/views.cljs"],"mappings":"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","names":["athens.views/about-panel","athens.views/file-cb","e","fr","js/FileReader","file","p1__56885#","G__56886","re-frame.core/dispatch","athens.views/pages-panel","nodes","G__56887","re-frame.core/subscribe","iter__4582__auto__","s__56889","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__56891","cljs.core/chunk-buffer","i__56890","vec__56892","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__56888","cljs.core/chunk-rest","vec__56895","cljs.core/first","cljs.core/cons","cljs.core/rest","cljs.core/deref","_","title","id","create-t","edit-t","reitit.frontend.easy.href.cljs$core$IFn$_invoke$arity$2","js/Date","athens.views/home-panel","athens.views/match-panel","name","G__56898","cljs.core/Keyword","athens.page/main","athens.views/main-panel","current-route","G__56899","reitit.frontend.easy.href.cljs$core$IFn$_invoke$arity$1","cljs.core/chunk-first"],"sourcesContent":["(ns athens.views\n  (:require\n   [athens.subs]\n   [athens.page :as page]\n   [re-frame.core :as rf :refer [subscribe dispatch]]\n   [reitit.frontend :as rfe]\n   [reitit.frontend.easy :as rfee]\n   ))\n\n(defn about-panel []\n  [:div [:h1 \"About Panel\"]])\n\n;; https://reactjs.org/docs/uncontrolled-components.html#the-file-input-tag\n;; https://codepen.io/tangsauce/pen/pojyOyV?editors=0010\n;; https://github.com/reagent-project/reagent/blob/master/doc/FAQ/UsingRefs.md\n;; https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications\n(defn file-cb [e]\n  (let [fr (js/FileReader.)\n        file (.. e -target -files (item 0))]\n    (set! (.-onload fr) #(dispatch [:upload-dsdb (.. % -target -result)]))\n    (.readAsText fr file)))\n\n(defn pages-panel []\n  (let [nodes (subscribe [:nodes])]\n    (fn []\n      [:div\n       [:p \"Upload your DB \" [:a {:href \"\"} \"(tutorial)\"]]\n       [:input {:type \"file\"\n                :name \"file-input\"\n                :on-change (fn [e] (file-cb e))}]\n       [:table {:style {:width \"60%\" :margin-top 20}}\n        [:thead\n         [:tr\n          [:th {:style {:text-align \"left\"}} \"Page\"]\n          [:th {:style {:text-align \"left\"}} \"Last Edit\"]\n          [:th {:style {:text-align \"left\"}} \"Created At\"]]]\n        [:tbody\n         (for [[_ title id create-t edit-t] @nodes]\n           ^{:key id}\n           [:tr\n            [:td {:style {:height 24}} [:a {:href (rfee/href :page {:id id})} title]]\n            [:td (.toLocaleString  (js/Date. create-t))]\n            [:td (.toLocaleString  (js/Date. edit-t))]])]]])))\n\n\n(defn home-panel []\n  (fn []\n    [:div\n     [:h1 \"Home Panel\"]]))\n\n(defn match-panel [name]\n  [(case name\n     :about about-panel\n     :pages pages-panel\n     :page  page/main \n     pages-panel)])\n\n(defn main-panel []\n  (let [current-route (subscribe [:current-route])]\n    (fn []\n      [:div\n       ;; [:h1 \"Hello World\"]\n       [:div\n        [:a {:href (rfee/href :pages)} \"All /pages\"]\n        [:span {:style {:margin 0 :margin-left 10}} \"Current Route: \" [:b (-> @current-route :path)]]]\n       [match-panel (-> @current-route :data :name)]\n       ])))\n"]}