{"version":3,"sources":["athens/router.cljs"],"mappings":"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","names":["G__56900","G__56901","re-frame.core/reg-sub","day8.re-frame.tracing/is-trace-enabled?","+debux-dbg-opts+","debux.common.util/send-form!","opts__51296__auto__","result__51297__auto__","debux.common.util/send-trace!","e","e56902","db","re_frame.core.reg_event_fx.cljs$core$IFn$_invoke$arity$2","p__56903","vec__56904","seq__56905","cljs.core/seq","first__56906","cljs.core/first","cljs.core/next","_","route","re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2","p__56908","vec__56909","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","e56913","p__56914","vec__56915","new-match","old-match","controllers","reitit.frontend.controllers/apply-controllers","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","G__56918","G__56919","re-frame.core/reg-fx","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","reitit.frontend.easy/push-state","athens.router/routes","athens.router/router","reitit.frontend.router.cljs$core$IFn$_invoke$arity$2","reitit.coercion.spec/coercion","athens.router/on-navigate","G__56920","re-frame.core/dispatch","athens.router/init-routes!","cljs.core.prn.cljs$core$IFn$_invoke$arity$variadic","reitit.frontend.easy/start!"],"sourcesContent":["(ns athens.router\n  (:require\n   [athens.views :as views]\n   [re-frame.core :refer [subscribe dispatch reg-sub reg-event-db reg-event-fx reg-fx]]\n   [reitit.frontend :as rfe]\n   [reitit.frontend.easy :as rfee]\n   [reitit.frontend.controllers :as rfc]\n   [reitit.coercion.spec :as rss]\n   [day8.re-frame.tracing :refer-macros [fn-traced]]\n))\n\n;; subs\n(reg-sub\n :current-route\n (fn-traced [db]\n   (:current-route db)))\n\n;; events\n(reg-event-fx\n :navigate\n (fn [_ [_ & route]]\n   {:navigate! route}))\n\n(reg-event-db\n :navigated\n (fn-traced [db [_ new-match]]\n   (let [old-match   (:current-route db)\n         controllers (rfc/apply-controllers (:controllers old-match) new-match)]\n     (assoc db :current-route (assoc new-match :controllers controllers)))))\n\n;; effects\n\n(reg-fx\n :navigate!\n (fn [route]\n   (apply rfee/push-state route)))\n\n;; router definition\n\n(def routes\n  [\"/\"\n   [\"\"      {:name :home}]\n   [\"about\" {:name :about}]\n   [\"pages\" {:name :pages}]\n   [\"page/:id\" {:name :page}]\n   ])\n\n(def router\n  (rfe/router\n   routes\n   {:data {:coercion rss/coercion}}))\n\n(defn on-navigate [new-match]\n  (when new-match\n    (dispatch [:navigated new-match])))\n\n(defn init-routes! []\n  (prn \"Initializing routes\")\n  (rfee/start!\n   router\n   on-navigate\n   {:use-fragment true}))\n"]}